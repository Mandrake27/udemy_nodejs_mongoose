<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/orders.css">
</head>

<body>
<%- include('../includes/navigation.ejs') %>
<main>
    <% if (orders.length) { %>
        <ul class='orders'>
            <% for (let { _id, products } of orders) { %>
                <li class='orders__item' id=<%= _id %>>
                    <h1>Order - # <%= _id %></h1>
                    <h1>Total: <%= products.reduce((acc, curr) => (acc += curr.product.price * curr.quantity), 0) %></h1>
                    <ul class='orders__products'>
                        <% products.forEach(({ _id, product, quantity }) => { %>
                            <li class='orders__products-item' id=<%= _id %>><%= product.title %> $<%= product.price %> -
                                (<%= quantity %>)
                            </li>
                        <% }) %>
                    </ul>
                </li>
            <% } %>
        </ul>
    <% } else { %>
        <h1>Nothing there!</h1>
    <% } %>
</main>
<%- include('../includes/end.ejs') %>
